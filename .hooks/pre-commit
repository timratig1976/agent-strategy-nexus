
#!/bin/bash
# Best Practice #5: Type checking pre-commit hook

# Get all staged TypeScript files
STAGED_TS_FILES=$(git diff --cached --name-only --diff-filter=ACMR | grep -E '\.tsx?$')

if [[ "$STAGED_TS_FILES" = "" ]]; then
  echo "No TypeScript files staged for commit."
  exit 0
fi

echo "Running type check for staged TypeScript files..."

# Run TypeScript check on staged files
npx tsc --noEmit --pretty false --skipLibCheck

# If there are TypeScript errors, exit with error code
if [ $? -ne 0 ]; then
  echo "❌ Type check failed. Please fix TypeScript errors before committing."
  exit 1
fi

echo "✅ Type check passed."
exit 0
